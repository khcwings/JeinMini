<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.jein.mini.common.dao.AdminMapper">
	<select id="selectCodeList" parameterType="Map" resultType="Map">
		SELECT 	CODE_GRP_ID, CODE_GRP_NAME, CODE_ID, CODE_NAME, CODE_DESC, CODE_LEVEL, USE_YN,
				ATTR_VALUE1, ATTR_VALUE2, ATTR_VALUE3, 
		        CREATE_ID, DATE_FORMAT(CREATE_DT, '%Y-%m-%d') AS CREATE_DT, 
		        COALESCE(UPDATE_ID, CREATE_ID) AS UPDATE_ID, DATE_FORMAT(COALESCE(UPDATE_DT, CREATE_DT), '%Y-%m-%d') AS UPDATE_DT
		FROM	CM_CODE
		WHERE	1 = 1 
				AND CODE_LEVEL 		= #{codeLevel}
				<if test="codeGrpId != null and codeGrpId != ''">
					AND CODE_GRP_ID 	LIKE CONCAT('%', #{codeGrpId}, '%')
				</if>
				<if test="codeGrpName != null and codeGrpName != ''">
					AND CODE_GRP_NAME 	LIKE CONCAT('%', #{codeGrpName}, '%')
				</if>
		ORDER BY CODE_GRP_ID ASC
	</select>
</mapper>