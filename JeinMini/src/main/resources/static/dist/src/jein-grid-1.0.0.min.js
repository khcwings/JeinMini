"use strict";var JeinGridFactory={getDefaultOptions:function(){return{el:null,data:[],scrollX:!1,scrollY:!1,header:[],columns:[]}}};function JeinGrid(){var e=null;this.getGrid=function(){return e},this.setGrid=function(t){e=t},this.prevRowIndex=null,this.prevColumnName=null}JeinGrid.prototype.create=function(t){var e={};return jut.isEmpty(t.id)||(e.el=$("#"+t.id.replace(/\#/g,""))),jut.isEmpty(t.rowHeaders)||(e.rowHeaders=t.rowHeaders),jut.isEmpty(t.scrollX)||(e.scrollX=t.scrollX),jut.isEmpty(t.scrollY)||(e.scrollY=t.scrollY),jut.isEmpty(t.header)||(e.header=t.header),jut.isEmpty(t.pagination)||(e.pagination=t.pagination),jut.isEmpty(t.columns)||(e.columns=t.columns),jut.isEmpty(t.height)||(e.bodyHeight=t.height),jut.isEmpty(t.virtualScrolling)||(e.virtualScrolling=t.virtualScrolling),jut.isEmpty(t.treeOptions)||(e.treeColumnOptions=t.treeOptions),this.setGrid(new tui.Grid(e)),"object"!=typeof t.data||jut.isEmpty(t.data.length)||this.getGrid().setData(t.data),jut.isEmpty(t.focusDefault)||t.focusDefault||this.getGrid().on("mousedown",function(t){"columnHead"===t.targetType&&t.stop()}),this},JeinGrid.prototype.addColumns=function(t){var e=this.getGrid();if(!jut.isEmpty(e)){var r=e.getColumns().concat(t);e.setColumns(r)}return this},JeinGrid.prototype.setGridStyle=function(t){tui.Grid.applyTheme("default",t)},JeinGrid.prototype.setData=function(t){return this.getGrid().setData(t),this},JeinGrid.prototype.setAjaxData=function(r){var i=this;return jcm.doAjax(!0,r.url,r.requestData,function(t,e){jut.isEmpty(r.dataKey)?i.setData(t):i.setData(t[r.dataKey])}),this},JeinGrid.prototype.setTreeData=function(t,e){var r,i=t,n=e.sortKey,o=e.parentKey,a=e.childrenKey,s=!jut.isEmpty(e.expand)&&e.expand,u=jut.ascendingSort(i,n),d={};d[o]="";var l=function(t){var e=t[o];t._children=[];for(var r=0;r<u.length;r++)u[r][a]===e&&(u[r]=l(u[r]),s&&(u[r]._extraData={treeState:"EXPAND"}),t._children.push(u[r]));return t._children=jut.ascendingSort(t._children,n),t};r=l(d);for(var p=[],c=0;c<r._children.length;c++)p.push(r._children[c]);return this.setData(p),this},JeinGrid.prototype.setAjaxTreeData=function(r){var i=this;return jcm.doAjax(!0,r.url,r.requestData,function(t,e){jut.isEmpty(r.dataKey)?i.setTreeData(t,r):i.setTreeData(t[r.dataKey],r)}),this},JeinGrid.prototype.focusChangeRow=function(e){var r=this;return this.getGrid().on("focusChange",function(t){r.prevRowIndex!==t.rowKey&&(e(t.rowKey,t.columnName,t.prevRowKey,t.prevColumnName),r.prevRowIndex=t.rowKey,r.prevColumnName=t.columnName)}),this},JeinGrid.prototype.focusChangeCell=function(e){return this.getGrid().on("focusChange",function(t){e(t.rowKey,t.columnName,t.prevRowKey,t.prevColumnName)}),this},JeinGrid.prototype.addRow=function(t,e){var r={},i=this.getGrid().getColumns();if(jut.isEmpty(e))for(var n=0;n<i.length;n++)r[i[n].name]="";else for(n=0;n<i.length;n++)for(var o in e)o===i[n].name?r[i[n].name]=e[o]:r[i[n].name]="";return this.getGrid().appendRow(r,{at:t}),this},JeinGrid.prototype.setRowDisabled=function(r){var i=this;return this.getGrid().on("mousedown",function(t){t.nativeEvent.target;var e=t.rowKey;i.getCellData(e,r.name)===r.value&&i.getGrid().disableRow(e)}),this},JeinGrid.prototype.setCellData=function(t,e,r){return this.getGrid().setValue(t,e,r),this},JeinGrid.prototype.setCheckedRowCellData=function(t,e){for(var r=this.getGrid(),i=r.getCheckedRowKeys(!1),n=0;n<i.length;n++)r.setValue(i[n],t,e);return this},JeinGrid.prototype.getCellData=function(t,e){return this.getGrid().getValue(t,e,!1)},JeinGrid.prototype.getFocusedCellData=function(t){var e=this.getGrid().getFocusedCell();return this.getGrid().getValue(e,t,!1)},JeinGrid.prototype.getData=function(){return this.getGrid().getRows()},JeinGrid.prototype.getChangedIgnoreData=function(t){var e=[];jut.isEmpty(t)||jut.isEmpty(t.length)||(e=t);for(var r=this.getGrid().getModifiedRows({checkedOnly:!1,withRawData:!1,rowKeyOnly:!1,ignoredColumns:e}),i=r.createdRows,n=r.updatedRows,o=r.deletedRows,a=[],s=0;s<i.length;s++)i[s].ROW_STATUS="C",a.push(i[s]);for(s=0;s<n.length;s++)n[s].ROW_STATUS="U",a.push(n[s]);for(s=0;s<o.length;s++)o[s].ROW_STATUS="D",a.push(o[s]);return a},JeinGrid.prototype.removeCheckedRows=function(){this.getGrid().removeCheckedRows(!1)},JeinGrid.prototype.getCheckedRowIndex=function(){};