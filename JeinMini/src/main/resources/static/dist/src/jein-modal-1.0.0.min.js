var JeinModalFactory=function(){"use strict";var n=[];return{addModal:function(t,e){n.push({id:e,modal:t})},removeModal:function(t){for(var e=0;e<n.length;e++)n[e].id===t&&n.slice(e,e+1)},getModal:function(t){for(var e=null,i=0;i<n.length;i++)n[i].id===t&&(e=n[i].modal);return e}}}();function JeinModal(t){var e=null;jut.isEmpty(t.data)||t.data;if(this.isShow=!1,this.id=jut.isEmpty(t.id)?"":t.id,this.url=jut.isEmpty(t.url)?"":t.url,this.width=jut.isEmpty(t.width)?jcm.constant.popup_width:1*t.width,this.height=jut.isEmpty(t.height)?jcm.constant.popup_height:1*t.height,this.bodyHeight=this.height,this.target=jut.isEmpty(t.target)?null:t.target,this.header=!jut.isEmpty(t.header)&&t.header,this.title=jut.isEmpty(t.title)?"":t.title,this.footer=!jut.isEmpty(t.header)&&t.header,this.okBtnFlag=!jut.isEmpty(t.okButton),this.cancelBtnFlag=!jut.isEmpty(t.cancelButton),this.okBtn=jut.isEmpty(t.okButton)?null:t.okButton,this.cancelBtn=jut.isEmpty(t.cancelButton)?null:t.cancelButton,this.customBtn=jut.isEmpty(t.customButtons)?null:t.customButtons,this.getData=function(){return this.data},this.getModal=function(){return e},jut.isEmpty(this.id))alert("팝업 ID가 없습니다.");else if(jut.isEmpty(this.url))alert("팝업 URL이 없습니다.");else if(jut.isEmpty(this.target))alert("이벤트를 동작시킬 버튼ID가 없습니다.");else{this.header&&(this.height+=50),this.footer&&(this.height+=50);var i=this;this.url=jcm.contentPath+this.url,JeinModalFactory.removeModal(this.id),$("#"+i.id).remove();var n=document.createElement("div");n.id=this.id,n.className="dim-layer";var a=document.createElement("div");a.className="dimBg",a.addEventListener("click",function(t){t.stopPropagation(),i.hide()}),n.appendChild(a);var s=document.createElement("div");s.className="pop-layer",s.style.width=this.width+"px",s.style.height=this.height+"px";var o=document.createElement("div");o.className="pop-header",o.style.height="50px",o.innerText=jut.isEmpty(this.title)?"":this.title;var l=document.createElement("div");l.className="pop-body",l.style.height=this.bodyHeight+"px";var c=document.createElement("div");if(c.className="pop-footer",c.style.height="50px",this.okBtnFlag){var h=document.createElement("button");h.innerText=jut.isEmpty(this.okBtn.label)?"Ok":this.okBtn.label,h.className=jut.isEmpty(this.okBtn.className)?"ui-button ui-corner-all ui-widget":this.okBtn.className,h.addEventListener("click",function(t){jut.isEmpty(i.okBtn.callback)||i.okBtn.callback(i)}),c.appendChild(h)}if(this.cancelBtnFlag){var u=document.createElement("button");u.innerText=jut.isEmpty(this.cancelBtn.label)?"Cancel":this.cancelBtn.label,u.className=jut.isEmpty(this.cancelBtn.className)?"ui-button ui-corner-all ui-widget":this.cancelBtn.className,u.addEventListener("click",function(t){jut.isEmpty(i.cancelBtn.callback)||i.cancelBtn.callback(i)}),c.appendChild(u)}if(!jut.isEmpty(this.customBtn)&&!jut.isEmpty(this.customBtn.length))for(var d=0;d<this.customBtn.length;d++){var r=document.createElement("button");r.innerText=jut.isEmpty(this.customBtn[d].label)?"":this.customBtn[d].label,r.className=jut.isEmpty(this.customBtn[d].className)?"ui-button ui-corner-all ui-widget":this.customBtn[d].className,r.setAttribute("data-index",d),r.addEventListener("click",function(t){jut.isEmpty(i.customBtn[1*t.target.getAttribute("data-index")].callback)||i.customBtn[1*t.target.getAttribute("data-index")].callback(i)}),c.appendChild(r)}s.appendChild(o),s.appendChild(l),s.appendChild(c),n.appendChild(s),e=$(n),JeinModalFactory.addModal(this,this.id),$("#"+i.target).on("click",function(){i.show()})}}JeinModal.prototype.show=function(){if(console.log("show"),!this.isShow){var s=this;$("body",top.document).append(s.getModal()),$("#"+s.id+" .pop-body").load(s.url,{},function(t,e,i){if("success"===e){var n=$("#"+s.id+" .pop-layer").outerWidth(),a=$("#"+s.id+" .pop-layer").outerHeight();$("#"+s.id+" .pop-layer").css({marginTop:a/2*-1,marginLeft:n/2*-1,position:"absolute"}),$("#"+s.id).show(jcm.constant.popup_effect,{},jcm.constant.popup_effect_time,function(){}),s.isShow=!0}})}return this},JeinModal.prototype.hide=function(){if(this.isShow){var t=this;$("#"+t.id).hide(jcm.constant.popup_effect,{},jcm.constant.popup_effect_time,function(){$("#"+t.id).remove(),t.isShow=!1})}return this},JeinModal.prototype.then=function(t){return t(JeinModalFactory.getModal(this.id)),this},JeinModal.prototype.isShow=function(){return this.isShow},JeinModal.prototype.broadcast=function(t){return JeinModalFactory.getModal(t).getData()};